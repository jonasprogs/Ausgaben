<!doctype html>
<html><head><meta charset="utf-8"><title>Clear SW</title></head>
<body>
<h1>Clearing Service Worker & Cachesâ€¦</h1>
<pre id="log"></pre>
<script>
(async()=>{
  const log = (t)=>{ document.getElementById('log').textContent += t+"\n"; };
  try{
    if('serviceWorker' in navigator){
      const regs = await navigator.serviceWorker.getRegistrations();
      regs.forEach(r=>{ r.unregister(); log('Unregistered SW'); });
    }
    if('caches' in window){
      const keys = await caches.keys();
      for(const k of keys){ await caches.delete(k); log('Deleted cache '+k); }
    }
    log('Done. Reload the site.');
  }catch(e){ log('Error: '+e); }
})();
</script>
</body></html>